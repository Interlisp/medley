(DEFINE-FILE-INFO PACKAGE "INTERLISP" READTABLE "XCL" BASE 10)
(FILECREATED "21-Sep-88 18:41:24" {ERIS}<LISPCORE>INTERNAL>NFS>AIS-NFS.\;2 2370   

      |changes| |to:|  (FUNCTIONS IP.DEFAULT.CONFIGURATION) (VARS AIS-NFSCOMS)

      |previous| |date:| "13-Jul-88 11:07:37" {ERIS}<LISPCORE>INTERNAL>NFS>AIS-NFS.\;1)


; Copyright (c) 1988 by Xerox Corporation.  All rights reserved.

(PRETTYCOMPRINT AIS-NFSCOMS)

(RPAQQ AIS-NFSCOMS ((FUNCTIONS IP.DEFAULT.CONFIGURATION) (VARS (TCP.ALWAYS.READ.HOSTS.FILE NIL)) (P (LET* ((*UPPER-CASE-FILE-NAMES* NIL) (OLDYP (INFILEP "{dsk}yp.init")) (NEWYP (INFILEP (PACKFILENAME.STRING (QUOTE BODY) "yp.init;" (QUOTE BODY) (FULLNAME (INPUT)))))) (COND ((AND NEWYP (OR (NULL OLDYP) (< (GETFILEINFO OLDYP (QUOTE ICREATIONDATE)) (GETFILEINFO NEWYP (QUOTE ICREATIONDATE))))) (PROMPTPRINT "Copying YP.INIT to {DSK}") (COPYFILE NEWYP (OR OLDYP "{dsk}yp.init")))))) (FILES NFS))
)

(CL:DEFUN IP.DEFAULT.CONFIGURATION (&OPTIONAL FORCE) (DECLARE (CL:SPECIAL \\3MBLOCALNDB \\10MBLOCALNDB \\IP.DEFAULT.CONFIGURATION \\MY.NSHOSTNUMBER)) (CL:WHEN (OR FORCE (AND (NULL \\IP.DEFAULT.CONFIGURATION) (NOT (INFILEP (QUOTE {DSK}IP.INIT))))) (CL:DO* ((PUPADDR (ETHERHOSTNUMBER) (ETHERHOSTNUMBER)) (PUP-NET-NUMBER (LDB (BYTE 8 8) PUPADDR) (LDB (BYTE 8 8) PUPADDR))) ((NOT (CL:ZEROP PUP-NET-NUMBER)) (LET* ((PUP-HOST-NUMBER (LDB (BYTE 8 0) PUPADDR)) (IPADDR-STRING (\\IP.ADDRESS.TO.STRING (DPB 13 (BYTE 8 24) (DPB PUP-NET-NUMBER (BYTE 14 10) PUP-HOST-NUMBER)))) (IPNET-STRING (\\IP.ADDRESS.TO.STRING (DPB 13 (BYTE 8 24) (DPB PUP-NET-NUMBER (BYTE 14 10) 0))))) (CL:SETQ \\IP.DEFAULT.CONFIGURATION (BQUOTE (((\\\, IPADDR-STRING)) (((\\\, IPNET-STRING) \\\, (COND (\\3MBLOCALNDB 3) (\\10MBLOCALNDB 10)))) NIL "{dsk}HOSTS.TXT" (\\\, (ETHERHOSTNAME)) (\\\, (LIST "13.255.252.0")) NIL (\\\, \\MY.NSHOSTNUMBER)))))) (DISMISS 500))))

(RPAQQ TCP.ALWAYS.READ.HOSTS.FILE NIL)

(LET* ((*UPPER-CASE-FILE-NAMES* NIL) (OLDYP (INFILEP "{dsk}yp.init")) (NEWYP (INFILEP (PACKFILENAME.STRING (QUOTE BODY) "yp.init;" (QUOTE BODY) (FULLNAME (INPUT)))))) (COND ((AND NEWYP (OR (NULL OLDYP) (< (GETFILEINFO OLDYP (QUOTE ICREATIONDATE)) (GETFILEINFO NEWYP (QUOTE ICREATIONDATE))))) (PROMPTPRINT "Copying YP.INIT to {DSK}") (COPYFILE NEWYP (OR OLDYP "{dsk}yp.init")))))

(FILESLOAD NFS)
(PUTPROPS AIS-NFS COPYRIGHT ("Xerox Corporation" 1988))
(DECLARE\: DONTCOPY
  (FILEMAP (NIL)))
STOP
