(DEFINE-FILE-INFO PACKAGE "XCL-USER" READTABLE "XCL" BASE 10)
(il:filecreated "26-Apr-88 14:32:34" il:|{NB:PARC:XEROX}<NFS>PARC-NFS.;2| 3546   

      il:|changes| il:|to:|  (il:vars il:parc-nfscoms)

      il:|previous| il:|date:| "14-Apr-88 13:46:32" il:|{NB:PARC:XEROX}<NFS>PARC-NFS.;1|)


; Copyright (c) 1988 by Xerox Corporation.  All rights reserved.

(il:prettycomprint il:parc-nfscoms)

(il:rpaqq il:parc-nfscoms ((il:functions il:ip.default.configuration)
                           (il:p (unless (or (probe-file "{dsk}ip.init")
                                             (probe-file "{dsk}hosts.txt"))
                                        (format il:promptwindow "~&Copying HOSTS.TXT to {DSK}~%")
                                        (il:copyfile "{nb:}<nfs>hosts.txt" "{dsk}hosts.txt"))
                                 (unless (probe-file "{dsk}yp.init")
                                        (format il:promptwindow "~&Copying YP.INIT to {DSK}~%")
                                        (il:copyfile "{nb:}<nfs>yp.init" "{dsk}yp.init")))
                           (il:files il:nfs)))

(defun il:ip.default.configuration (&optional il:force)
   (declare (special il:\\3mblocalndb il:\\10mblocalndb il:\\ip.default.configuration))
   (when (or il:force (and (null il:\\ip.default.configuration)
                           (not (il:infilep 'il:{dsk}ip.init))))
         (let* ((il:pupaddr (il:etherhostnumber))
                (il:pup-net-number (ldb (byte 8 8)
                                        il:pupaddr))
                (il:pup-host-number (ldb (byte 8 0)
                                         il:pupaddr))
                (il:ipaddr-string (il:\\ip.address.to.string (dpb 13 (byte 8 24)
                                                                  (dpb il:pup-net-number
                                                                       (byte 14 10)
                                                                       il:pup-host-number))))
                (il:ipnet-string (il:\\ip.address.to.string (dpb 13 (byte 8 24)
                                                                 (dpb il:pup-net-number
                                                                      (byte 14 10)
                                                                      0)))))
               (setq il:\\ip.default.configuration `((,il:ipaddr-string)
                                                     ((,il:ipnet-string il:\\\, (cond
                                                                                   (il:\\3mblocalndb
                                                                                    3)
                                                                                   (il:\\10mblocalndb
                                                                                    10))))
                                                     nil "{dsk}HOSTS.TXT" ,(il:etherhostname)
                                                     ,(list "13.255.252.0") nil nil)))))

(unless (or (probe-file "{dsk}ip.init")
            (probe-file "{dsk}hosts.txt"))
       (format il:promptwindow "~&Copying HOSTS.TXT to {DSK}~%")
       (il:copyfile "{nb:}<nfs>hosts.txt" "{dsk}hosts.txt"))
(unless (probe-file "{dsk}yp.init")
       (format il:promptwindow "~&Copying YP.INIT to {DSK}~%")
       (il:copyfile "{nb:}<nfs>yp.init" "{dsk}yp.init"))
(il:filesload il:nfs)
(il:putprops il:parc-nfs il:copyright ("Xerox Corporation" 1988))
(il:declare\: il:dontcopy
  (il:filemap (nil)))
il:stop
