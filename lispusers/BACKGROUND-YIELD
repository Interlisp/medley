(DEFINE-FILE-INFO PACKAGE "INTERLISP" READTABLE "INTERLISP" BASE 10)
(FILECREATED "19-Sep-2021 13:37:10" {DSK}<home>larry>medley>lispusers>BACKGROUND-YIELD.;1 1408   

      changes to%:  (VARS BACKGROUND-YIELDCOMS)
                    (FNS BACKGROUND-YIELD INIT-YIELD))


(PRETTYCOMPRINT BACKGROUND-YIELDCOMS)

(RPAQQ BACKGROUND-YIELDCOMS [
                                 (* ;; 
                               " Add a call to BACKGROUNDFNS to yield when not otherwise busy")

                                 (FNS BACKGROUND-YIELD INIT-YIELD)
                                 (DECLARE%: DONTEVAL@LOAD DOCOPY (P (INIT-YIELD T])



(* ;; " Add a call to BACKGROUNDFNS to yield when not otherwise busy")

(DEFINEQ

(BACKGROUND-YIELD
  [LAMBDA NIL                                          (* ; "Edited  2-Mar-2021 14:31 by larry")
    (SUBRCALL YIELD (CONSTANT (ITIMES 833333)))
    (SUBRCALL CAUSE-INTERRUPT])

(INIT-YIELD
  [LAMBDA (ONP)                                        (* ; "Edited 19-Sep-2021 13:32 by larry")
    (SETQ BACKGROUNDFNS (REMOVE 'BACKGROUND-YIELD BACKGROUNDFNS))
    (if [AND ONP (CCODEP (GETD 'BACKGROUND-YIELD]
        then 

              (* ;; " add to end")

              (SETQ BACKGROUNDFNS (APPEND BACKGROUNDFNS '(BACKGROUND-YIELD])
)
(DECLARE%: DONTEVAL@LOAD DOCOPY 

(INIT-YIELD T)
)
(DECLARE%: DONTCOPY
  (FILEMAP (NIL (730 1330 (BACKGROUND-YIELD 740 . 946) (INIT-YIELD 948 . 1328)))))
STOP
