(DEFINE-FILE-INFO PACKAGE "INTERLISP" READTABLE "INTERLISP" BASE 10)
(FILECREATED "12-Jul-88 14:35:59" |{MCS:MCS:STANFORD}<LANE>HASHDATUM.;4| 3829   

      changes to%:  (VARS HASHDATUMCOMS)
                    (FNS GETHASHTEDIT)

      previous date%: "15-Sep-87 11:25:28" |{MCS:MCS:STANFORD}<LANE>HASHDATUM.;3|)


(* "
Copyright (c) 1985, 1986, 1987, 1988 by Stanford University.  All rights reserved.
")

(PRETTYCOMPRINT HASHDATUMCOMS)

(RPAQQ HASHDATUMCOMS ((FNS GETHASHDATUM PUTHASHDATUM)
                          (MACROS GETHASHBITMAP PUTHASHBITMAP GETHASHBINARYBITMAP PUTHASHBINARYBITMAP
                                 GETHASHGRAPH PUTHASHGRAPH GETHASHUGLY PUTHASHUGLY PUTHASHTEDIT)
                          (FNS GETHASHTEDIT \WRITEBM)
                          (DECLARE%: DONTCOPY DOEVAL@COMPILE (FILES (LOADCOMP)
                                                                    HASH))
                          (FILES HASH)))
(DEFINEQ

(GETHASHDATUM
  [LAMBDA (KEY HASHFILE READFN)                              (* cdl "28-Jun-85 10:07")
    (PROG ((HASHTEXTPTR (GETHASHFILE KEY HASHFILE)))
          (if (type? HashTextPtr HASHTEXTPTR)
              then (with HashFile HASHFILE (with HashTextPtr HASHTEXTPTR (SETFILEPTR Stream Start))
                         (RETURN (APPLY* READFN Stream])

(PUTHASHDATUM
  [LAMBDA (KEY DATA HASHFILE PRINTFN)                        (* cdl "28-Jun-85 10:17")
    (with HashFile (SETQ HASHFILE (GTHASHFILE HASHFILE T))
          (SETFILEPTR Stream -1)
          (PROG [(HASHTEXTPTR (create HashTextPtr
                                     Start _ (GETEOFPTR Stream]
                (with HashTextPtr HASHTEXTPTR (APPLY* PRINTFN DATA Stream)
                      (SETQ End (GETEOFPTR Stream)))
                (RETURN (PUTHASHFILE KEY HASHTEXTPTR HASHFILE])
)
(DECLARE%: EVAL@COMPILE 

[PUTPROPS GETHASHBITMAP MACRO ((KEY HASHFILE)
                               (GETHASHDATUM KEY HASHFILE (FUNCTION READBITMAP]

[PUTPROPS PUTHASHBITMAP MACRO ((KEY BITMAP HASHFILE)
                               (PUTHASHDATUM KEY BITMAP HASHFILE (FUNCTION PRINTBITMAP]

[PUTPROPS GETHASHBINARYBITMAP MACRO ((KEY HASHFILE)
                                     (GETHASHDATUM KEY HASHFILE (FUNCTION READBM]

[PUTPROPS PUTHASHBINARYBITMAP MACRO ((KEY BITMAP HASHFILE)
                                     (PUTHASHDATUM KEY BITMAP HASHFILE (FUNCTION \WRITEBM]

[PUTPROPS GETHASHGRAPH MACRO ((KEY HASHFILE)
                              (GETHASHDATUM KEY HASHFILE (FUNCTION READGRAPH]

[PUTPROPS PUTHASHGRAPH MACRO ((KEY GRAPH HASHFILE)
                              (PUTHASHDATUM KEY GRAPH HASHFILE (FUNCTION DUMPGRAPH]

[PUTPROPS GETHASHUGLY MACRO ((KEY HASHFILE)
                             (GETHASHDATUM KEY HASHFILE (FUNCTION HREAD]

[PUTPROPS PUTHASHUGLY MACRO ((KEY UGLYVAR HASHFILE)
                             (PUTHASHDATUM KEY UGLYVAR HASHFILE (FUNCTION HPRINT]

[PUTPROPS PUTHASHTEDIT MACRO ((KEY TEXTOBJ HASHFILE)
                              (PUTHASHDATUM KEY TEXTOBJ HASHFILE (FUNCTION TEDIT.PUT.PCTB]
)
(DEFINEQ

(GETHASHTEDIT
  [LAMBDA (KEY HASHFILE WINDOW PROPS)                    (* ; "Edited 12-Jul-88 14:33 by cdl")
    (with HashTextPtr (GETHASHFILE KEY HASHFILE)
           (OPENTEXTSTREAM (OPENSTREAM (with HashFile HASHFILE File)
                                  'INPUT)
                  WINDOW Start End PROPS])

(\WRITEBM
  [LAMBDA (BITMAP STREAM)                                    (* cdl "24-Oct-85 10:51")
    (WRITEBM STREAM BITMAP])
)
(DECLARE%: DONTCOPY DOEVAL@COMPILE 

(FILESLOAD (LOADCOMP)
       HASH)
)

(FILESLOAD HASH)
(PUTPROPS HASHDATUM COPYRIGHT ("Stanford University" 1985 1986 1987 1988))
(DECLARE%: DONTCOPY
  (FILEMAP (NIL (956 1880 (GETHASHDATUM 966 . 1354) (PUTHASHDATUM 1356 . 1878)) (3157 3639 (GETHASHTEDIT
 3167 . 3498) (\WRITEBM 3500 . 3637)))))
STOP
