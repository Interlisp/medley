en·vÅos	TURBO-WINDOWS241TURBO-WINDOWS14By:  Andrew J. Cameron, III (Cameron.pa@Xerox.com or cameron@cs.wisc.edu)New Owner:  Atty Mullins (Mullins.pa@Xerox.com)Uses:  WDHACKS (LispUsers) [optional] This document last edited on Sept. 8, 1988.INTRODUCTIONTurbo-Windows does not have anything to do with speeding up primitive window operations, but rather it helps speed up your use and manipulation of windows by providing most of the right button menu functions via shift keychords.  In this way one can Move, Shape, Copy, Shrink, Close, etc.,  a window without having to wait for the right button menu to appear and then select from it.  Also, when providing the INITIAL shape of a window, pressing the middle button yields a large default size suitable for TEdit, etc.  (Recall that using the middle button during a RESIZING operation allows you to keep roughly the original window shape and then move the corner nearest the cursor when the middle button was pressed.)One can bring up a brief cribsheet for all the TurboWindow keychord commands by holding down the HELP key and RIGHT buttoning on the background (not in any window).  This can also be produce by typing (TW.HELP) to an InterLisp EXEC.OPERATIONBefore discussing how to use this utility, a description of how the key-chords were chosen is in order.  They are based loosely on the effect of the shift keys in TEdit.  Recall that in TEdit, pressing and holding the Shift key Copies whatever is selected.  Also, pressing and holding the Control key  (sometimes labeled PROPS or EDIT) Deletes whatever is selected.  Pressing both Shift and Control performs both a copy and a delete, which ends up Moving the selected item.  The only additional piece of information that you need to know is that the Meta key (sometimes labeled KEYBOARD or ALT) modifies an operation or in some way makes it different.  With this general interpretation, most of the key-chords are rather easy to remember.If the following keys are chorded (held down together) while the right mouse button is pressed in the region of a window which would normally bring up the right-button menu (by convention, at least the title bar should provide the right button menu), the listed operation will be invoked without actually bringing up the right button menu.SHIFT (using the LEFT SHIFT key or CAPS LOCK  key) Makes a copy of a window by snapping it.CONTROLCloses (deletes) a window.  (Since this is a destructive operation, a small safeguard is built into this operation.  If one holds the CONTROL key and depresses the right mouse button and continues to hold them, the window to be operated on (closed) will blink.  If this is not the window you want to close you can cancel the Turbo-Close by either moving outside the window (or by releasing the CONTROL key before releasing the right mouse button).  If you abort the Turbo-Close in this manner, the normal right button menu will appear.  Clicking outside of the menu will make it go away.  Sometimes unexpected things occur when trying to Turbo-Close windows with attached windows, e.g. FileBrowsers, but hopefully this safeguard is conservative enough to avoid inadvertent closing of the wrong window.)   [Holding down CONTROL while Right Buttoning on the background activates Window Slamming, if the LispUsers utility WDHACKS is loaded.)METAShape (makes different) a window.SHIFT-CONTROLMoves a window.  (Due to the design of the InterLisp window system, this operation works in a rather strange way.  You press and hold both CONTROL and SHIFT and then press the right mouse button while in the appropriate part (title bar) of the window you want to move.  You then need to release the right button to be able to actually move the window.  In order to "drop" the window (here is the strange part) you need to press the LEFT (or middle) button.  Pressing the right button merely allows you to move to a different corner of the shadow box.)  META-CONTROLShrinks ("deletes" in a different way) a window.META-SHIFTRedisplays (copies in a different way) a window.META-SHIFT-CONTROLBuries (moves in a different way) a window.  [You might also think of this as pushing the window down to the bottom, as you are pressing down all three shift keys.]RIGHT-SHIFTClears a window.HELPPressing the HELP key while the cursor is in the background (or typing (TW.HELP) to an InterLisp EXEC) displays a cribsheet for the Turbo-Window KeyChords.  Some addition capabilities not listed here are given on that cribsheet.  The "OTHER" keychords which are marked with an asterisk (*) indicate that some side-effect (potentially quite harmful) might occur depending on where the TTY is when those alternate access methods are used.  You are warned!GETTING STARTED[If any of the operations described below do not perform properly, it might be the case that your keys are not defined in the way that this utility expects.  See INTERNALS below for more information.]  You might want to get familiar with Turbo-Windows by first bringing up the cribsheet by depressing the HELP key and right-buttoning on the background.  Next, make a copy of the cribsheet by depressing SHIFT (the left shift key) and right-buttoning on the cribsheet.  Drop the new copy of the cribsheet by releasing all keys and buttons and the pressing the left mouse button.  [Note: The cribsheet is merely written to the TTY window, which happens to be sensitive to the right mouse button everywhere.  Other windows may only be sensitive to the right button (for the purpose of bringing up the right button menu, in their title bar.]  Now try moving the copied cribsheet by pressing both SHIFT and CONTROL (PROPS or EDIT) and right-buttoning on the copy of the cribsheet.  Again, release everything (well, just releasing the mouse button will do) and press the left mouse button to drop it.  Press and hold both META (KEYBOARD) and CONTROL while right buttoning in the copy of the cribsheet to shrink it to an icon.  Release and click the left mouse button to drop the icon.  Reopen (expand) the icon by middle buttoning on it.  Reshape the copy of the cribsheet by pressing META and right buttoning on the copy's window.  Release and rubberband the new shape with the left mouse button.  (Do you know what would happen if you used the middle button after releasing instead?  Try it.)   Assuming the copy of the cribsheet is overlapping another window and some part of the background (if not, Turbo-Move it so it is), press and hold all three (META, SHIFT, and CONTROL) and right button in the cribsheet copy's window to bury it.  Right button (holding no other keys) in the partially exposed area of the now buried cribsheet copy to bring it back to the top.    Finally, close the copied cribsheet window by pressing CONTROL while right buttoning in the copy's window.  [O.K. which shift key combination hasn't been used yet?  Consult the original cribsheet (or produce it again), if necessary.  Give that combination a try in the original cribsheet's window.  [Did you notice the message in the prompt window?]  And don't forget to give the Right Shift key (Clears a window) a try as well.  [Remember, the cribsheet can be brought back at any time using HELP-RightButton on the background.] )  To see how to cancel a Turbo-Close, depress the CONTROL key and press AND HOLD the right mouse button while in the original cribsheet window.  Notice that the window blinks.  Before you release the right mouse button move the cursor outside the cribsheet's window and then release the right mouse button.  The cribsheet's window is not closed because releasing outside the window that flashed cancels the Turbo-Close.  The normal right button menu appears instead.  Click outside it to get rid of it.  Now, actually close the original cribsheet window.   And with that, may I welcome you to the fast paced world of Turbo-Windows.   INTERNALSThe right button events are intercepted by a piece of advice placed on DOWINDOWCOM.  The middle button sizing capability is provide by advice on \GETREGIONTRACKWITHBOX.The window snapping Turbo-Window feature (LeftShift-RightMouseButton) is also added as a submenu to the normal right button menu provided by the window system.A common problem is that the META key is not defined to be at the proper place (attached to the key named KEYBOARD).  To remedy this, type:         (KEYACTION 'KEYBOARD '(METADOWN . METAUP)) to an InterLisp EXEC.  The following should also be the case:         (KEYACTION 'EDIT '(CTRLDOWN . CTRLUP))          (KEYACTION 'LSHIFT '(1SHIFTDOWN . 1SHIFTUP))          (KEYACTION 'RSHIFT '(2SHIFTDOWN . 2SHIFTUP))These can be verified by using, for example:         (KEYACTION 'EDIT)TW.NO-FLASH-CLOSE	[Variable]Initially NIL, if set to T, windows will not flash to indicate there impending closure.TW.DONT-GROW-SNAP-BORDER	[Variable]Initially NIL, if set to T, windows will be copied without a small border.  The small border is quite handy in telling the original window from its Turbo-Snapped copy.TW.SNAP-HERE	[Variable]Initially NIL, if set to T, windows will  be copied directly on top of the window they are duplicating.  Normally (when NIL) the user must position the copy. GETREGIONDEFAULT	[Variable]This variable can be bound dynamically by an application to provide the region afforded by middle buttoning when prompted for an initial region of a window.  It is initially set to roughly 7x9 inches, and is useful for TEdit windows, FileBrowsers, etc.  [See the LispUsers utility RESIZE-FILEBROWSER for an even better way of dealing with FileBrowsers.]ÿÿ ïfÿ 	In order to edit/compile the source of this utility, the InterLisp Source file WINDOW must be loaded in order to provide the SCREEN record definition used by the window system internals.  The loading of this source file occurs automatically when this utility's source file is loaded.   	ÿÿ ïfÿ 	This utility interacts poorly with other utilities that redefine any of the shift keys.  TEDITKEY and PC-Emulation (among others) are dubious in this regard.      (LIST ((PAGE NIL (PAPERSIZE Letter FOLIOINFO (ARABIC "" "") STARTINGPAGE# 277) (0 0 612 792) ((FOLIO NIL (PARALOOKS (QUAD CENTERED) CHARLOOKS (SUPERSCRIPT 0 INVISIBLE OFF SELECTPOINT OFF PROTECTED OFF SIZE 10 FAMILY MODERN OVERLINE OFF STRIKEOUT OFF UNDERLINE OFF EXPANSION REGULAR SLOPE REGULAR WEIGHT MEDIUM INVERTED OFF USERINFO NIL STYLE NIL) FORMATINFO (ARABIC "" "")) (174 36 288 36) NIL) (HEADING NIL (HEADINGTYPE RUNNINGHEAD) (84 744 528 36) NIL) (TEXT NIL NIL (84 96 456 600) NIL))) (PAGE NIL (PAPERSIZE NIL . LETTER) (0 0 612 792) ((FOLIO NIL (PARALOOKS (QUAD CENTERED) CHARLOOKS (SUPERSCRIPT 0 INVISIBLE OFF SELECTPOINT OFF PROTECTED OFF SIZE 10 FAMILY MODERN OVERLINE OFF STRIKEOUT OFF UNDERLINE OFF EXPANSION REGULAR SLOPE REGULAR WEIGHT MEDIUM INVERTED OFF USERINFO NIL STYLE NIL) FORMATINFO NIL) (174 36 288 36) NIL) (HEADING NIL (HEADINGTYPE RUNNINGHEAD) (84 744 528 36) NIL) (TEXT NIL NIL (84 96 456 600) NIL))) (PAGE NIL (PAPERSIZE NIL . LETTER) (0 0 612 792) ((FOLIO NIL (PARALOOKS (QUAD CENTERED) CHARLOOKS (SUPERSCRIPT 0 INVISIBLE OFF SELECTPOINT OFF PROTECTED OFF SIZE 10 FAMILY MODERN OVERLINE OFF STRIKEOUT OFF UNDERLINE OFF EXPANSION REGULAR SLOPE REGULAR WEIGHT MEDIUM INVERTED OFF USERINFO NIL STYLE NIL) FORMATINFO NIL) (174 36 288 36) NIL) (HEADING NIL (HEADINGTYPE RUNNINGHEAD) (84 744 528 36) NIL) (TEXT NIL NIL (84 96 456 600) NIL)))))      
 2   È                                     3    È      È                   T         -    È                       T         -    È                       T         ,    È                                 ,    È                                 ,    È                                 , Š Š8                                 , Š Š8                                  H    È        È       PAGEHEADING RUNNINGHEAD                        	  CLASSIC          CLASSIC          CLASSIC          TERMINAL 
          	HELVETICA 
          MODERN 
         MODERN 
          MODERN          MODERN               
                                   	             
     HRULE.GETFN  MODERN 
                     	     HRULE.GETFN  MODERN 
                     	     HRULE.GETFN  MODERN 
                                       HRULE.GETFN  MODERN                     	     HRULE.GETFN  MODERN                        z             '             +                                       ‚            L             é             
            ã            T             4             )                         «                          "                         *                          1                          1                          ¥                                                   Æ                                 Ë            s             	                    ©                           Œ                    0                    >                    ,                           2                           2                    -                                                                   X                                        ¨                                        Ÿ                                       b                  #                   ¡      'X ™zº