#!/bin/sh


case "$1" in

    "issue")
	issue=`gh issue list -L 1000 -R interlisp/medley | shuf -n 1 |  sed 's/\([0-9]*\).*/\1/'`
	gh issue view $issue -R interlisp/medley -w
	gh issue view $issue -R interlisp/medley
	;;

    
    # "discussion")
    # 	discussion=`gh discussion list -L 1000 -R interlisp/medley | shuf -n 1 |  sed 's/\([0-9]*\).*/\1/'`
    # 	gh discussion view $discussion -R interlisp/medley -w
    # 	gh discussion view $discussion -R interlisp/medley
    # 	;;

    "oneof")
	shift
	shuf -n 1 -e $@
	;;
    "dir")
	pick oneof lispusers library sources doctools internal
	;;
    "package")
        pick oneof clos rooms notecards online
	;;
    "obscure")
	pick oneof clos CLTL2 Interlisp/.github
	;;
    "file")
	if [ -z $MEDLEYDIR ]; then
	    if [ -x run-medley ]; then
		MEDLEYDIR=`pwd`
	    elif [ -x medley/run-medley ]; then
		MEDLEYDIR=./medley
	    else
		echo "MEDLEYDIR not found"
	    fi
	fi	
	cd $MEDLEYDIR
	dir=$2
	if [ -z $dir ]; then
	    dir=`pick dir`
	fi
	find ./$dir -type f | shuf -n 1
	;;
    "")
	pick `pick oneof file issue obscure package`
	;;
    "*")
	pick issue
	;;
esac

    
