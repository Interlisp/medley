(DEFINE-FILE-INFO READTABLE "INTERLISP" PACKAGE (DEFPACKAGE "CONDITIONS"))
(IL:FILECREATED "16-May-90 15:08:25" IL:{DSK}<usr>local>lde>lispcore>sources>CONDITION-PACKAGE.;2 5040   

      IL:changes IL:to%:  (IL:VARS IL:CONDITION-PACKAGECOMS)

      IL:previous IL:date%: "31-Dec-00 16:49:37" 
IL:{DSK}<usr>local>lde>lispcore>sources>CONDITION-PACKAGE.;1)


(IL:* ; "
Copyright (c) 1987, 1988, 1900, 1990 by Venue & Xerox Corporation.  All rights reserved.
")

(IL:PRETTYCOMPRINT IL:CONDITION-PACKAGECOMS)

(IL:RPAQQ IL:CONDITION-PACKAGECOMS
          ((IL:FUNCTIONS CL::NATURALIZE DEFECT-FROM-XCL-TO-CONDITIONS)
           (IL:VARIABLES *FUTURE-CITIZENS-OF-CONDITIONS*)
           (IL:DECLARE%: IL:DONTEVAL@LOAD IL:DOCOPY
                  (IL:P (XCL:DEFPACKAGE "CONDITIONS"
                               (:EXPORT *BREAK-ON-SIGNALS* HANDLER-CASE WITH-SIMPLE-RESTART 
                                      RESTART-CASE RESTART-BIND COMPUTE-RESTARTS RESTART-NAME 
                                      FIND-RESTART INVOKE-RESTART INVOKE-RESTART-INTERACTIVELY 
                                      CONTINUE MUFFLE-WARNING INVOKE-DEBUGGER RESTART 
                                      TYPE-ERROR-DATUM PROGRAM-ERROR FILE-ERROR FILE-ERROR-PATHNAME 
                                      DIVISION-BY-ZERO FLOATING-POINT-OVERFLOW 
                                      FLOATING-POINT-UNDERFLOW))
                        (MAPC #'DEFECT-FROM-XCL-TO-CONDITIONS *FUTURE-CITIZENS-OF-CONDITIONS*)))
           (IL:PROP (IL:FILETYPE IL:MAKEFILE-ENVIRONMENT)
                  IL:CONDITION-PACKAGE)))

(DEFUN CL::NATURALIZE (CL::NAME CL::SOURCE CL::DESTINATION)
   "Make a symbol, possibly in source, be in source and citizen and export of destination."
   (CHECK-TYPE CL::NAME STRING)
   (CHECK-TYPE CL::SOURCE PACKAGE)
   (CHECK-TYPE CL::DESTINATION PACKAGE)
   [MULTIPLE-VALUE-BIND (CL::SSYMBOL CL::SWHERE)
          (FIND-SYMBOL CL::NAME CL::SOURCE)
          (MULTIPLE-VALUE-BIND (CL::DSYMBOL CL::DWHERE)
                 (FIND-SYMBOL CL::NAME CL::DESTINATION)
                 (COND
                    ((AND CL::SWHERE CL::DWHERE (NOT (EQ CL::SSYMBOL CL::DSYMBOL)))
                     (ERROR "Can't naturalize ~s because name exists in ~s and ~s" CL::NAME
                            (PACKAGE-NAME CL::SOURCE)
                            (PACKAGE-NAME CL::DESTINATION)))
                    (CL::SWHERE (IMPORT CL::SSYMBOL CL::DESTINATION)
                           (EXPORT CL::SSYMBOL CL::DESTINATION)
                           (SETF (SYMBOL-PACKAGE CL::SSYMBOL)
                                 CL::DESTINATION))
                    (CL::DWHERE (IMPORT CL::DSYMBOL CL::SOURCE)
                           (EXPORT CL::DSYMBOL CL::DESTINATION)
                           (SETF (SYMBOL-PACKAGE CL::DSYMBOL)
                                 CL::DESTINATION))
                    (T (LET ((SYMBOL (INTERN CL::NAME CL::DESTINATION)))
                            (IMPORT SYMBOL CL::SOURCE)
                            (EXPORT SYMBOL CL::DESTINATION]
   T)

(DEFUN DEFECT-FROM-XCL-TO-CONDITIONS (NAME)
   (CL::NATURALIZE NAME (FIND-PACKAGE "XCL")
          (FIND-PACKAGE "CONDITIONS")))

(XCL:DEFGLOBALPARAMETER *FUTURE-CITIZENS-OF-CONDITIONS*
   '("SIGNAL" "IGNORE-ERRORS" "HANDLER-BIND" "DEFINE-CONDITION" "MAKE-CONDITION" "ABORT" 
           "STORE-VALUE" "USE-VALUE" "CONDITION" "WARNING" "SERIOUS-CONDITION" "SIMPLE-CONDITION" 
           "SIMPLE-WARNING" "SIMPLE-ERROR" "SIMPLE-CONDITION-FORMAT-STRING" 
           "SIMPLE-CONDITION-FORMAT-ARGUMENTS" "STORAGE-CONDITION" "CONTROL-ERROR" "STREAM-ERROR" 
           "STREAM-ERROR-STREAM" "END-OF-FILE" "CELL-ERROR" "CELL-ERROR-NAME" "UNBOUND-VARIABLE" 
           "UNDEFINED-FUNCTION" "ARITHMETIC-ERROR" "ARITHMETIC-ERROR-OPERATION" 
           "ARITHMETIC-ERROR-OPERANDS" "SIMPLE-TYPE-ERROR" "TYPE-ERROR" "TYPE-ERROR-EXPECTED-TYPE")
   "Current citizens of XCL that should be in CONDITIONS: do not change this list!!!")
(IL:DECLARE%: IL:DONTEVAL@LOAD IL:DOCOPY 

(XCL:DEFPACKAGE "CONDITIONS"
       (:EXPORT *BREAK-ON-SIGNALS* HANDLER-CASE WITH-SIMPLE-RESTART RESTART-CASE RESTART-BIND 
              COMPUTE-RESTARTS RESTART-NAME FIND-RESTART INVOKE-RESTART INVOKE-RESTART-INTERACTIVELY
              CONTINUE MUFFLE-WARNING INVOKE-DEBUGGER RESTART TYPE-ERROR-DATUM PROGRAM-ERROR 
              FILE-ERROR FILE-ERROR-PATHNAME DIVISION-BY-ZERO FLOATING-POINT-OVERFLOW 
              FLOATING-POINT-UNDERFLOW))

(MAPC #'DEFECT-FROM-XCL-TO-CONDITIONS *FUTURE-CITIZENS-OF-CONDITIONS*)
)

(IL:PUTPROPS IL:CONDITION-PACKAGE IL:FILETYPE IL:COMPILE-FILE)

(IL:PUTPROPS IL:CONDITION-PACKAGE IL:MAKEFILE-ENVIRONMENT (:READTABLE "INTERLISP" :PACKAGE
                                                                         (XCL:DEFPACKAGE "CONDITIONS"
                                                                                )))
(IL:PUTPROPS IL:CONDITION-PACKAGE IL:COPYRIGHT ("Venue & Xerox Corporation" 1987 1988 1900 1990))
(IL:DECLARE%: IL:DONTCOPY
  (IL:FILEMAP (NIL)))
IL:STOP
