(DEFINE-FILE-INFO READTABLE "INTERLISP" PACKAGE "INTERLISP")
(FILECREATED "13-Aug-2020 12:36:18" {DSK}<Users>kaplan>Local>medley3.5>lispcore>sources>DEXEC.;10 5477   

      changes to%:  (VARS DEXECCOMS)

      previous date%: "13-Aug-2020 12:31:18" 
{DSK}<Users>kaplan>Local>medley3.5>lispcore>sources>DEXEC.;9)


(* ; "
Copyright (c) 1982, 1983, 1984, 1985, 1986, 1990, 2018, 2020 by Venue & Xerox Corporation.  All rights reserved.
The following program was created in 1982 but has not been published
within the meaning of the copyright law, is furnished under license,
and may not be used, copied and/or disclosed except in accordance
with the terms of said license.
")

(PRETTYCOMPRINT DEXECCOMS)

(RPAQQ DEXECCOMS
       [

(* ;;; "Has to come after ADISPLAY and CMLEXEC.")

        (COMMANDS "see" "see*" "ty" "type")
        (INITVARS (/LAST.CONNECTED.DIRECTORY LOGINHOST/DIR))
        (LISPXMACROS CONN DA)
        (FNS /CNDIR COPYALLBYTES SEE SEE*)
        (COMS (CURSORS SAVINGCURSOR SYSOUTCURSOR \PROMPTFORWORD.CURSOR))
        (PROP FILETYPE DEXEC)
        [DECLARE%: DONTEVAL@LOAD DOCOPY (P (MOVD 'SEE 'TY]
        (DECLARE%: DONTEVAL@LOAD DOEVAL@COMPILE DONTCOPY COMPILERVARS (ADDVARS (NLAMA SEE* SEE)
                                                                             (NLAML)
                                                                             (LAMA])



(* ;;; "Has to come after ADISPLAY and CMLEXEC.")


(DEFCOMMAND "see" (&REST ARGS) "Print the contents of a file on the screen, hiding comments"
   (APPLY 'SEE ARGS))

(DEFCOMMAND "see*" (&REST ARGS) "Print the contents of a file on the screen"
   (APPLY 'SEE* ARGS))

(DEFCOMMAND "ty" (&REST ARGS) "Print the contents of a file on the screen, hiding comments"
   (APPLY 'SEE ARGS))

(DEFCOMMAND "type" (&REST ARGS) "Print the contents of a file on the screen, hiding comments"
   (APPLY 'SEE ARGS))

(RPAQ? /LAST.CONNECTED.DIRECTORY LOGINHOST/DIR)

(ADDTOVAR LISPXHISTORYMACROS (DA (PROGN (LISPXPRIN1 (DATE)
                                                   T)
                                            (TERPRI T))))

(ADDTOVAR LISPXMACROS [CONN (/CNDIR (CAR (NLAMBDA.ARGS LISPXLINE])

(ADDTOVAR LISPXCOMS CONN DA)
(DEFINEQ

(/CNDIR
  [LAMBDA (HOST/DIR)                                    (* ; "Edited 13-Aug-2020 12:31 by rmk:")

    (* ;; "RMK:  August 2020, added - ala Unix")

    (AND LISPXHIST (UNDOSAVE (LIST '/CNDIR (DIRECTORYNAME T T))
                          LISPXHIST))
    (CL:WHEN (EQ HOST/DIR '-)
           (SETQ HOST/DIR /LAST.CONNECTED.DIRECTORY))
    (/SET '/LAST.CONNECTED.DIRECTORY (DIRECTORYNAME T T))
    (CNDIR HOST/DIR])

(COPYALLBYTES
  [LAMBDA (FROMFILE TOFILE BYTESIZE EXTERNALFORMAT)     (* ; "Edited 11-Aug-2020 20:35 by rmk:")
                                                             (* bvm%: "29-Jan-86 19:50")
    (RESETLST
        [PROG (INF OUTF PTR)
              [COND
                 (FROMFILE [RESETSAVE NIL (LIST 'CLOSEF (SETQ INF (OPENSTREAM
                                                                   FROMFILE
                                                                   'INPUT NIL
                                                                   `((EXTERNALFORMAT ,EXTERNALFORMAT)
                                                                     )
                                                                   BYTESIZE]
                        (OR (EQ (GETFILEPTR INF)
                                0)
                            (SETFILEPTR INF 0)))
                 (T (SETQ INF (INPUT]                        (* close the files only if I opened 
                                                           them)
              [COND
                 ((NULL TOFILE)
                  (SETQ OUTF (OUTPUT)))
                 ([NULL (SETQ OUTF (OPENP TOFILE 'OUTPUT]
                  (RESETSAVE NIL (LIST 'CLOSEF (SETQ OUTF (OPENSTREAM TOFILE 'OUTPUT NIL BYTESIZE]
              (COND
                 ((AND (NULL BYTESIZE)
                       (DISPLAYP OUTF))
                  (PFCOPYBYTES INF OUTF NIL NIL PFDEFAULT))
                 (T (COPYBYTES INF OUTF])])

(SEE
  (NLAMBDA LINE                                              (* lmm "14-Aug-84 19:07")
    (SETQ LINE (NLAMBDA.ARGS LINE))
    (COPYALLBYTES (CAR LINE)
           (OR (CADR LINE)
               T)
           (CADDR LINE))))

(SEE*
  [NLAMBDA LINE                                         (* ; "Edited  1-May-2018 10:22 by rmk:")
    (SETQ LINE (NLAMBDA.ARGS LINE))
    (LET ((**COMMENT**FLG NIL))
         (APPLY (FUNCTION SEE)
                LINE])
)
(RPAQ SAVINGCURSOR (CURSORCREATE (QUOTE #*(16 16)@@@@FDJ@HJJ@LJJ@BNJLJJD@LJD@@@@@@JDN@KEB@KE@@JMF@JMB@JEL@@@@@@@@
) (QUOTE NIL) 0 15))
(RPAQ SYSOUTCURSOR (CURSORCREATE (QUOTE #*(16 16)@@@@CJDNDAE@C@HL@HHBDIABCA@L@@@@@@@@AIBNBEBDBEBDBEBDBEBDAHLD@@@@
) (QUOTE NIL) 0 15))
(RPAQ \PROMPTFORWORD.CURSOR (CURSORCREATE (QUOTE #*(16 16)H@@@L@@@N@CLO@FFOHFFOL@FON@LO@AHMHAHIH@@@LAH@LAH@F@@@F@@@C@@@C@@
) (QUOTE NIL) 0 15))

(PUTPROPS DEXEC FILETYPE CL:COMPILE-FILE)
(DECLARE%: DONTEVAL@LOAD DOCOPY 

(MOVD 'SEE 'TY)
)
(DECLARE%: DONTEVAL@LOAD DOEVAL@COMPILE DONTCOPY COMPILERVARS 

(ADDTOVAR NLAMA SEE* SEE)

(ADDTOVAR NLAML )

(ADDTOVAR LAMA )
)
(PUTPROPS DEXEC COPYRIGHT ("Venue & Xerox Corporation" T 1982 1983 1984 1985 1986 1990 2018 2020))
(DECLARE%: DONTCOPY
  (FILEMAP (NIL (2246 4697 (/CNDIR 2256 . 2693) (COPYALLBYTES 2695 . 4211) (SEE 4213 . 4457) (SEE* 4459
 . 4695)))))
STOP
