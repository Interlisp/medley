(DEFINE-FILE-INFO READTABLE "XCL" PACKAGE "INTERLISP")(FILECREATED " 6-Feb-2021 15:41:31" |{DSK}<home>larry>ilisp>medley>sources>LOADUP-LISP.;2| 7240         |changes| |to:|  (VARS LOADUP-LISPCOMS)      |previous| |date:| " 5-Feb-2021 13:59:18" |{DSK}<home>larry>ilisp>medley>sources>LOADUP-LISP.;1|)(PRETTYCOMPRINT LOADUP-LISPCOMS)(RPAQQ LOADUP-LISPCOMS       ((FNS ENDLOADUP LOADUP-LISP MEDLEY-INIT-VARS MEDLEYDIR MEDLEYVERSION)        (FILES SYNCLISPFILES)        (VARS MEDLEY-INIT-VARS)        (GLOBALVARS XCL::*WHERE-IS-CASH-FILES* LISPMAKESYSDATE MAKESYSFILENAME MEDLEY-INIT-VARS                MEDLEYDIR SYSTEMINITVARS USERRECLST)        (FUNCTIONS WITHOUT.PAGEHOLD)        (DECLARE\: DONTEVAL@LOAD DOCOPY (P (LOADUP-LISP)))))(DEFINEQ(ENDLOADUP  (LAMBDA NIL                                           (* \; "Edited  5-Feb-2021 12:50 by lmm")                                                             (* \;                                                            "Edited 10-Dec-2020 21:49 by larry")                                                             (* \; "Edited 11-Oct-90 11:02 by jds")    (* |;;|   "set up for NONET configuration;  sites with ethernet can load in init from other places")    (* |;;| "All records existing at this point in time have been loaded as part of the system.")    (MAPC USERRECLST (FUNCTION (LAMBDA (R)                                 (AND R (RECORDPRIORITY R 'SYSTEM)))))    (MEDLEY-INIT-VARS T)    (|for| X |in| SYSTEMINITVARS |when| (NOT (ASSOC X MEDLEY-INIT-VARS))       |do| (SETTOPVAL (CAR X)                       (COPY (CDR X))))))(LOADUP-LISP  (LAMBDA NIL                                           (* \; "Edited  5-Feb-2021 13:59 by lmm")    (DRIBBLE (MEDLEYDIR "loadups" "xlisp.dribble" T))    (* |;;| " Use SYNCLISPFILES to make XLISP from LISP")    (WITHOUT.PAGEHOLD (MEDLEY-INIT-VARS)           (SETQ LISPMAKESYSDATE MAKESYSDATE)           (SETQ MAKESYSFILENAME (MEDLEYDIR "loadups" "xlisp.sysout" T))           (SYNCLISPFILES)           (ENDLOADUP)           (CLRPROMPT)           (BKSYSBUF (CONCAT "(IL:MAKESYS \"" MAKESYSFILENAME "\" \"Medley Lisp Sysout\")"))           (DRIBBLE))))(MEDLEY-INIT-VARS  (LAMBDA (CLEAR)                                     (* \; "Edited 17-Jan-2021 14:29 by larry")    (* |;;| "MEDLEY-INIT-VARS has variables that might need to get reset. ")    (|if| CLEAR        |then| (SETQ MEDLEYDIR NIL)              (SETQ XCL::*WHERE-IS-CASH-FILES* NIL)              (|for| X |in| MEDLEY-INIT-VARS |do| (SET (CAR X)))      |elseif| (OR (NOT (BOUNDP 'MEDLEYDIR))                       (AND (NULL MEDLEYDIR)                            (NULL (MEDLEYDIR))))        |then| (PRINTOUT T "WARNING: MEDLEYDIR not set correctly"                           " set it and call (MEDLEY-INIT-VARS) again" T)      |else| (|for| X |in| MEDLEY-INIT-VARS |do| (SET (CAR X)                                                                      (EVAL (CADR X))))             (* |;;| "WHEREIS doesn't follow conventions")            (CL:WHEN (GETD 'XCL::ADD-WHERE-IS-DATABASE)                (SETQ XCL::*WHERE-IS-CASH-FILES* NIL)                (NLSETQ (XCL::ADD-WHERE-IS-DATABASE (MEDLEYDIR "loadups" "WHEREIS.HASH"))))            NIL)))(MEDLEYDIR  (LAMBDA (DIRNAME FILENAME OUTPUT)                   (* \; "Edited 14-Dec-2020 17:12 by larry")    (|if| (NULL DIRNAME)        |then| (|if| (OR (NOT (BOUNDP 'MEDLEYDIR))                                 (NOT MEDLEYDIR))                       |then| (OR (SETQ MEDLEYDIR (DIRECTORYNAME (OR (UNIX-GETENV "MEDLEYDIR")                                                                         T)))                                      (DIRECTORYNAME T))                     |elseif| (STRPOS "/" MEDLEYDIR)                       |then| (SETQ MEDLEYDIR (DIRECTORYNAME MEDLEYDIR))                     |else| MEDLEYDIR)      |elseif| (LISTP DIRNAME)        |then| (|for| X |in| DIRNAME |collect| (MEDLEYDIR X))      |elseif| FILENAME        |then| (SETQ FILENAME (CONCAT (MEDLEYDIR DIRNAME)                                         FILENAME))              (|if| OUTPUT                  |then| FILENAME                |else| (OR (INFILEP FILENAME)                               (ERROR "No such medley file" FILENAME)))      |else| (OR (DIRECTORYNAME (CONCAT (MEDLEYDIR)                                           DIRNAME))                     (ERROR "No such medley directory" DIRNAME)))))(MEDLEYVERSION  (LAMBDA NIL                                                (* \;                                                            "Edited 25-Mar-2018 22:07 by rmk:")                                                             (* \; "Edited 11-Nov-98 22:02 by rmk:")    (SELECTQ (LISPVERSION)        (39424 '|1.1|)        (39539 '|1.15|)        (40960 '|1.2|)        (4928 '|2.0|)        (21000 '|2.1|)        (35000 '|3.5|)        (35010 '|3.5|)        (HELP "UNRECOGNIZED MEDLEY VERSION" (LISPVERSION))))))(FILESLOAD SYNCLISPFILES)(RPAQQ MEDLEY-INIT-VARS       ((LISPUSERSDIRECTORIES (MEDLEYDIR '("library" "lispusers" "internal/library")))        (LISPSOURCEDIRECTORIES (MEDLEYDIR '("sources")))        (LISPSOURCEDIRECTORY (CAR LISPSOURCEDIRECTORIES))        (IRM.HOST&DIR (MEDLEYDIR '"docs/dinfo"))        (IRM.DINFOGRAPH)        (DIRECTORIES (APPEND LISPUSERSDIRECTORIES LISPSOURCEDIRECTORIES))        (LOGINHOST/DIR (DIRECTORYNAME (OR (UNIX-GETENV "LOGINDIR")                                          (UNIX-GETENV "HOME"))))        (USERGREETFILES `((,LOGINHOST/DIR "INIT" COM)                          (,LOGINHOST/DIR "INIT")))        (DISPLAYFONTDIRECTORIES (MEDLEYDIR '("fonts/displayfonts" "fonts/altofonts")))        (POSTSCRIPTFONTDIRECTORIES (MEDLEYDIR '("fonts/postscriptfonts")))        (INTERPRESSFONTDIRECTORIES (MEDLEYDIR '("fonts/ipfonts")))        (XCL::*WHERE-IS-CASH-FILES*)))(DECLARE\: DOEVAL@COMPILE DONTCOPY(GLOBALVARS XCL::*WHERE-IS-CASH-FILES* LISPMAKESYSDATE MAKESYSFILENAME MEDLEY-INIT-VARS MEDLEYDIR        SYSTEMINITVARS USERRECLST))(DEFMACRO WITHOUT.PAGEHOLD (WINDOW &BODY FORMS)   `(RESETLST        (LET* ((TTYWINDOW ,WINDOW)               (ORIGINAL.PAGEFULLFN (WINDOWPROP TTYWINDOW 'PAGEFULLFN))               (NEW.PAGEFULLFN (FUNCTION NILL)))              (RESETSAVE (WINDOWPROP TTYWINDOW 'PAGEFULLFN NEW.PAGEFULLFN)                     (LIST (FUNCTION (LAMBDA (TTYWINDOW NEW.PAGEFULLFN ORIGINAL.PAGEFULLFN)                                       (COND                                          ((EQ (WINDOWPROP TTYWINDOW 'PAGEFULLFN)                                               NEW.PAGEFULLFN)                                           (WINDOWPROP TTYWINDOW 'PAGEFULLFN ORIGINAL.PAGEFULLFN)))))                           TTYWINDOW NEW.PAGEFULLFN ORIGINAL.PAGEFULLFN)))        ,@FORMS))(DECLARE\: DONTEVAL@LOAD DOCOPY (LOADUP-LISP))(DECLARE\: DONTCOPY  (FILEMAP (NIL (764 5304 (ENDLOADUP 774 . 1693) (LOADUP-LISP 1695 . 2304) (MEDLEY-INIT-VARS 2306 . 3451) (MEDLEYDIR 3453 . 4756) (MEDLEYVERSION 4758 . 5302)))))STOP