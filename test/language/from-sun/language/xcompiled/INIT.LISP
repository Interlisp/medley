(DEFINE-FILE-INFO READTABLE "XCL" PACKAGE "INTERLISP")
(* LOAD "{DSK}</users/krivacic/work/hires/>BOYER.LCOM")
(* LOAD "{DSK}</users/krivacic/translator>NATIVETRAN.LCOM")
(* LOAD "{DSK}</users/krivacic/translator>COMPILEBANG.LCOM")
(KEYACTION 'CTRL '(CTRLDOWN . CTRLUP))
(KEYACTION 'LOCK '(LOCKTOGGLE . IGNORE))
(* DEFINEQ
  (FIXDISPLAY NIL
      (SETQ SCREENWIDTH 1600)  
      (SETQ SCREENHEIGHT 600)   
      (MOVD 'NILL 'UPDATESCREENDIMENSIONS) 
      (\\STARTDISPLAY)))
(* FIXDISPLAY)
(* DEFINEQ (TAK (X Y Z) 
        (IF (NOT (ILESSP Y X))  THEN Z 
         ELSE 
            (TAK (TAK (SUB1 X) Y Z) 
                 (TAK (SUB1 Y) Z X)
                 (TAK (SUB1 Z) X Y)
            )
        ))
)
(* DEFINEQ (BTAK (X Y Z) 
        (IF (NOT (ILESSP Y X))  THEN Z 
         ELSE 
            (BTAK (BTAK (SUB1 X) Y Z) 
                  (BTAK (SUB1 Y) Z X)
                  (BTAK (SUB1 Z) X Y)
            )
        ))
)
(* DEFINEQ (FUN1 (X Y) (PLUS X Y (FUN2 X Y))))
(* DEFINEQ (FUN2 (X Y) (PLUS X Y)))
(* COMPILE! (QUOTE FUN1))
(* COMPILE! (QUOTE FUN2))
(* COMPILE! (QUOTE BTAK))
(* NATIVE (QUOTE BTAK) NIL T)
(* TIME (BTAK 18 12 6))
(* DEFINEQ (RESET-SCREEN (addr size) 
		(PRINTOUT T "Before Reset" T)
		((OPCODES 125 96 2) addr size)
		(PRINTOUT T "After Reset of " addr " for " size T)
		(for i from 1 to 5 do (PRINTOUT T "i=" i T))
	 ) )
(* cl:COMPILE (QUOTE TAK))
(* TIME (TAK 18 12 6))
(* NATIVE (QUOTE TAK) T T)
(* TIME (TAK 18 12 6))
(* COMPILE! (QUOTE RESET-SCREEN))
(* NATIVE (QUOTE BTAK) T T)
(* TIME (BTAK 18 12 6))
(* LOAD (QUOTE SET-SCREEN))
(* DEFINEQ (DORS NIL 
		(RESET-SCREEN (fetch (BITMAP BITMAPBASE) of |ScreenBitMap|)
				 1049056)))
(* DORS)
(* NATIVE (QUOTE ONE-WAY-UNIFY1-LST) T T)
(* SETUP)
(DEFINEQ (RUN-TESTS NIL 
		(FOR X IN (CL:DIRECTORY "*.DFASL")
			 DO (IF (NOT (XCL::IGNORE-ERRORS (LOAD X)))
					THEN (CL:FORMAT *ERROR-OUTPUT* 
									"FAILED TO LOAD: ~A~%" X)))))
STOP
